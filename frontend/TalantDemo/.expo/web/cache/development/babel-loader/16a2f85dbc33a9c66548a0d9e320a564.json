{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\darya\\\\Documents\\\\TalantDemo\\\\node_modules\\\\react-native-actionsheet\\\\lib\\\\ActionSheetCustom.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport * as utils from \"./utils\";\nimport styles2 from \"./styles\";\nvar WARN_COLOR = '#FF3B30';\nvar MAX_HEIGHT = Dimensions.get('window').height * 0.7;\n\nvar ActionSheet = function (_React$Component) {\n  _inherits(ActionSheet, _React$Component);\n\n  var _super = _createSuper(ActionSheet);\n\n  function ActionSheet(props) {\n    var _this;\n\n    _classCallCheck(this, ActionSheet);\n\n    _this = _super.call(this, props);\n\n    _this.show = function () {\n      _this.setState({\n        visible: true\n      }, function () {\n        _this._showSheet();\n      });\n    };\n\n    _this.hide = function (index) {\n      _this._hideSheet(function () {\n        _this.setState({\n          visible: false\n        }, function () {\n          _this.props.onPress(index);\n        });\n      });\n    };\n\n    _this._cancel = function () {\n      var cancelButtonIndex = _this.props.cancelButtonIndex;\n\n      if (utils.isset(cancelButtonIndex)) {\n        _this.hide(cancelButtonIndex);\n      }\n    };\n\n    _this._showSheet = function () {\n      Animated.timing(_this.state.sheetAnim, {\n        toValue: 0,\n        duration: 250,\n        easing: Easing.out(Easing.ease)\n      }).start();\n    };\n\n    _this.scrollEnabled = false;\n    _this.translateY = _this._calculateHeight(props);\n    _this.state = {\n      visible: false,\n      sheetAnim: new Animated.Value(_this.translateY)\n    };\n    return _this;\n  }\n\n  _createClass(ActionSheet, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.translateY = this._calculateHeight(nextProps);\n    }\n  }, {\n    key: \"_hideSheet\",\n    value: function _hideSheet(callback) {\n      Animated.timing(this.state.sheetAnim, {\n        toValue: this.translateY,\n        duration: 200\n      }).start(callback);\n    }\n  }, {\n    key: \"_calculateHeight\",\n    value: function _calculateHeight(props) {\n      var styles = this.styles;\n\n      var getHeight = function getHeight(name) {\n        var style = styles[name][styles[name].length - 1];\n        var h = 0;\n        ['height', 'marginTop', 'marginBottom'].forEach(function (attrName) {\n          if (typeof style[attrName] !== 'undefined') {\n            h += style[attrName];\n          }\n        });\n        return h;\n      };\n\n      var height = 0;\n      if (props.title) height += getHeight('titleBox');\n      if (props.message) height += getHeight('messageBox');\n\n      if (utils.isset(props.cancelButtonIndex)) {\n        height += getHeight('cancelButtonBox');\n        height += (props.options.length - 1) * getHeight('buttonBox');\n      } else {\n        height += props.options.length * getHeight('buttonBox');\n      }\n\n      if (height > MAX_HEIGHT) {\n        this.scrollEnabled = true;\n        height = MAX_HEIGHT;\n      } else {\n        this.scrollEnabled = false;\n      }\n\n      return height;\n    }\n  }, {\n    key: \"_renderTitle\",\n    value: function _renderTitle() {\n      var title = this.props.title;\n      var styles = this.styles;\n      if (!title) return null;\n      return React.createElement(View, {\n        style: styles.titleBox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 7\n        }\n      }, React.isValidElement(title) ? title : React.createElement(Text, {\n        style: styles.titleText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }\n      }, title));\n    }\n  }, {\n    key: \"_renderMessage\",\n    value: function _renderMessage() {\n      var message = this.props.message;\n      var styles = this.styles;\n      if (!message) return null;\n      return React.createElement(View, {\n        style: styles.messageBox,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 7\n        }\n      }, React.isValidElement(message) ? message : React.createElement(Text, {\n        style: styles.messageText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }\n      }, message));\n    }\n  }, {\n    key: \"_renderCancelButton\",\n    value: function _renderCancelButton() {\n      var _this$props = this.props,\n          options = _this$props.options,\n          cancelButtonIndex = _this$props.cancelButtonIndex;\n      if (!utils.isset(cancelButtonIndex)) return null;\n      return this._createButton(options[cancelButtonIndex], cancelButtonIndex);\n    }\n  }, {\n    key: \"_createButton\",\n    value: function _createButton(title, index) {\n      var _this2 = this;\n\n      var styles = this.styles;\n      var _this$props2 = this.props,\n          buttonUnderlayColor = _this$props2.buttonUnderlayColor,\n          cancelButtonIndex = _this$props2.cancelButtonIndex,\n          destructiveButtonIndex = _this$props2.destructiveButtonIndex,\n          tintColor = _this$props2.tintColor;\n      var fontColor = destructiveButtonIndex === index ? WARN_COLOR : tintColor;\n      var buttonBoxStyle = cancelButtonIndex === index ? styles.cancelButtonBox : styles.buttonBox;\n      return React.createElement(TouchableHighlight, {\n        key: index,\n        activeOpacity: 1,\n        underlayColor: buttonUnderlayColor,\n        style: buttonBoxStyle,\n        onPress: function onPress() {\n          return _this2.hide(index);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 7\n        }\n      }, React.isValidElement(title) ? title : React.createElement(Text, {\n        style: [styles.buttonText, {\n          color: fontColor\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }\n      }, title));\n    }\n  }, {\n    key: \"_renderOptions\",\n    value: function _renderOptions() {\n      var _this3 = this;\n\n      var cancelButtonIndex = this.props.cancelButtonIndex;\n      return this.props.options.map(function (title, index) {\n        return cancelButtonIndex === index ? null : _this3._createButton(title, index);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var styles = this.styles;\n      var _this$state = this.state,\n          visible = _this$state.visible,\n          sheetAnim = _this$state.sheetAnim;\n      return React.createElement(Modal, {\n        visible: visible,\n        animationType: \"none\",\n        transparent: true,\n        onRequestClose: this._cancel,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: [styles.wrapper],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: [styles.overlay],\n        onPress: this._cancel,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }\n      }), React.createElement(Animated.View, {\n        style: [styles.body, {\n          height: this.translateY,\n          transform: [{\n            translateY: sheetAnim\n          }]\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }\n      }, this._renderTitle(), this._renderMessage(), React.createElement(ScrollView, {\n        scrollEnabled: this.scrollEnabled,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }\n      }, this._renderOptions()), this._renderCancelButton())));\n    }\n  }, {\n    key: \"styles\",\n    get: function get() {\n      var styles = this.props.styles;\n      var obj = {};\n      Object.keys(styles2).forEach(function (key) {\n        var arr = [styles2[key]];\n\n        if (styles[key]) {\n          arr.push(styles[key]);\n        }\n\n        obj[key] = arr;\n      });\n      return obj;\n    }\n  }]);\n\n  return ActionSheet;\n}(React.Component);\n\nActionSheet.defaultProps = {\n  tintColor: '#007AFF',\n  buttonUnderlayColor: '#F4F4F4',\n  onPress: function onPress() {},\n  styles: {}\n};\nexport default ActionSheet;","map":{"version":3,"sources":["C:/Users/darya/Documents/TalantDemo/node_modules/react-native-actionsheet/lib/ActionSheetCustom.js"],"names":["React","utils","styles2","WARN_COLOR","MAX_HEIGHT","Dimensions","get","height","ActionSheet","props","show","setState","visible","_showSheet","hide","index","_hideSheet","onPress","_cancel","cancelButtonIndex","isset","Animated","timing","state","sheetAnim","toValue","duration","easing","Easing","out","ease","start","scrollEnabled","translateY","_calculateHeight","Value","nextProps","callback","styles","getHeight","name","style","length","h","forEach","attrName","title","message","options","titleBox","isValidElement","titleText","messageBox","messageText","_createButton","buttonUnderlayColor","destructiveButtonIndex","tintColor","fontColor","buttonBoxStyle","cancelButtonBox","buttonBox","buttonText","color","map","wrapper","overlay","body","transform","_renderTitle","_renderMessage","_renderOptions","_renderCancelButton","obj","Object","keys","key","arr","push","Component","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Text, View, Dimensions, Modal, TouchableHighlight, Animated, ScrollView, Easing } from 'react-native'\nimport * as utils from './utils'\nimport styles2 from './styles'\n\nconst WARN_COLOR = '#FF3B30'\nconst MAX_HEIGHT = Dimensions.get('window').height * 0.7\n\nclass ActionSheet extends React.Component {\n  static defaultProps = {\n    tintColor: '#007AFF',\n    buttonUnderlayColor: '#F4F4F4',\n    onPress: () => {},\n    styles: {}\n  }\n\n  constructor (props) {\n    super(props)\n    this.scrollEnabled = false\n    this.translateY = this._calculateHeight(props)\n    this.state = {\n      visible: false,\n      sheetAnim: new Animated.Value(this.translateY)\n    }\n  }\n\n  componentWillReceiveProps (nextProps) {\n    this.translateY = this._calculateHeight(nextProps)\n  }\n\n  get styles () {\n    const { styles } = this.props\n    const obj = {}\n    Object.keys(styles2).forEach((key) => {\n      const arr = [styles2[key]]\n      if (styles[key]) {\n        arr.push(styles[key])\n      }\n      obj[key] = arr\n    })\n    return obj\n  }\n\n  show = () => {\n    this.setState({visible: true}, () => {\n      this._showSheet()\n    })\n  }\n\n  hide = (index) => {\n    this._hideSheet(() => {\n      this.setState({visible: false}, () => {\n        this.props.onPress(index)\n      })\n    })\n  }\n\n  _cancel = () => {\n    const { cancelButtonIndex } = this.props\n    // 保持和 ActionSheetIOS 一致，\n    // 未设置 cancelButtonIndex 时，点击背景不隐藏 ActionSheet\n    if (utils.isset(cancelButtonIndex)) {\n      this.hide(cancelButtonIndex)\n    }\n  }\n\n  _showSheet = () => {\n    Animated.timing(this.state.sheetAnim, {\n      toValue: 0,\n      duration: 250,\n      easing: Easing.out(Easing.ease)\n    }).start()\n  }\n\n  _hideSheet (callback) {\n    Animated.timing(this.state.sheetAnim, {\n      toValue: this.translateY,\n      duration: 200\n    }).start(callback)\n  }\n\n  /**\n   * elements: titleBox, messageBox, buttonBox, cancelButtonBox\n   * box size: height, marginTop, marginBottom\n   */\n  _calculateHeight (props) {\n    const styles = this.styles\n\n    const getHeight = (name) => {\n      const style = styles[name][styles[name].length - 1]\n      let h = 0\n      ;['height', 'marginTop', 'marginBottom'].forEach((attrName) => {\n        if (typeof style[attrName] !== 'undefined') {\n          h += style[attrName]\n        }\n      })\n      return h\n    }\n\n    let height = 0\n    if (props.title) height += getHeight('titleBox')\n    if (props.message) height += getHeight('messageBox')\n    if (utils.isset(props.cancelButtonIndex)) {\n      height += getHeight('cancelButtonBox')\n      height += (props.options.length - 1) * getHeight('buttonBox')\n    } else {\n      height += props.options.length * getHeight('buttonBox')\n    }\n\n    if (height > MAX_HEIGHT) {\n      this.scrollEnabled = true\n      height = MAX_HEIGHT\n    } else {\n      this.scrollEnabled = false\n    }\n\n    return height\n  }\n\n  _renderTitle () {\n    const { title } = this.props\n    const styles = this.styles\n    if (!title) return null\n    return (\n      <View style={styles.titleBox}>\n        {React.isValidElement(title) ? title : (\n          <Text style={styles.titleText}>{title}</Text>\n        )}\n      </View>\n    )\n  }\n\n  _renderMessage () {\n    const { message } = this.props\n    const styles = this.styles\n    if (!message) return null\n    return (\n      <View style={styles.messageBox}>\n        {React.isValidElement(message) ? message : (\n          <Text style={styles.messageText}>{message}</Text>\n        )}\n      </View>\n    )\n  }\n\n  _renderCancelButton () {\n    const { options, cancelButtonIndex } = this.props\n    if (!utils.isset(cancelButtonIndex)) return null\n    return this._createButton(options[cancelButtonIndex], cancelButtonIndex)\n  }\n\n  _createButton (title, index) {\n    const styles = this.styles\n    const { buttonUnderlayColor, cancelButtonIndex, destructiveButtonIndex, tintColor } = this.props\n    const fontColor = destructiveButtonIndex === index ? WARN_COLOR : tintColor\n    const buttonBoxStyle = cancelButtonIndex === index ? styles.cancelButtonBox : styles.buttonBox\n    return (\n      <TouchableHighlight\n        key={index}\n        activeOpacity={1}\n        underlayColor={buttonUnderlayColor}\n        style={buttonBoxStyle}\n        onPress={() => this.hide(index)}\n      >\n        {React.isValidElement(title) ? title : (\n          <Text style={[styles.buttonText, {color: fontColor}]}>{title}</Text>\n        )}\n      </TouchableHighlight>\n    )\n  }\n\n  _renderOptions () {\n    const { cancelButtonIndex } = this.props\n    return this.props.options.map((title, index) => {\n      return cancelButtonIndex === index ? null : this._createButton(title, index)\n    })\n  }\n\n  render () {\n    const styles = this.styles\n    const { visible, sheetAnim } = this.state\n    return (\n      <Modal visible={visible}\n        animationType='none'\n        transparent\n        onRequestClose={this._cancel}\n      >\n        <View style={[styles.wrapper]}>\n          <Text\n            style={[styles.overlay]}\n            onPress={this._cancel}\n          />\n          <Animated.View\n            style={[\n              styles.body,\n              { height: this.translateY, transform: [{ translateY: sheetAnim }] }\n            ]}\n          >\n            {this._renderTitle()}\n            {this._renderMessage()}\n            <ScrollView scrollEnabled={this.scrollEnabled}>{this._renderOptions()}</ScrollView>\n            {this._renderCancelButton()}\n          </Animated.View>\n        </View>\n      </Modal>\n    )\n  }\n}\n\nexport default ActionSheet\n"]},"metadata":{},"sourceType":"module"}